<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>201 Table</title>
<style>
    
/* -----------------------------
   GLOBAL STYLES
------------------------------ */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Poppins', sans-serif;
    background: #eef3ef;
    color: #2b2b2b;
}

/* -----------------------------
   HEADER
------------------------------ */
.header {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px 30px;
    background: linear-gradient(135deg, #1c7c32, #2fa34d);
    color: white;
    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
    position: sticky;
    top: 0;
    z-index: 100;
}

.logo {
    width: 65px;
    height: 65px;
    border-radius: 50%;
    background: white;
    padding: 5px;
    object-fit: cover;
    box-shadow: 0 4px 10px rgba(0,0,0,0.25);
}

.title h2 {
    font-size: 22px;
    font-weight: 600;
}

.title p {
    font-size: 14px;
    opacity: 0.9;
}

/* -----------------------------
   BACK BUTTON
------------------------------ */
.backBtn {
    display: inline-block;
    margin: 20px 25px;
    padding: 10px 20px;
    background: #1c7c32;
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    transition: 0.2s ease;
}

.backBtn:hover {
    background: #157033;
}

/* -----------------------------
   MAIN CONTAINER
------------------------------ */
.container {
    background: white;
    margin: 0 25px 25px 25px;
    padding: 25px;
    border-radius: 14px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.12);
    animation: fadeIn 0.4s ease;
    overflow-x: auto;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
}

/* -----------------------------
   TABLE STYLES
------------------------------ */
table {
    width: 100%;
    border-collapse: collapse;
    min-width: 1200px;
    font-size: 14px;
}

thead {
    background: #d9e7dd;
}

th, td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #e6e6e6;
}

tbody tr:hover {
    background: #f3faf4;
    transform: scale(1.01);
}

/* -----------------------------
   ADD BUTTON
------------------------------ */
#addRowBtn {
    margin-top: 15px;
    padding: 12px 20px;
    background: #1c7c32;
    color: white;
    border: none;
    border-radius: 10px;
    font-weight: bold;
    cursor: pointer;
    transition: 0.25s;
    box-shadow: 0 4px 12px rgba(28,124,50,0.25);
}

#addRowBtn:hover {
    background: #145e25;
    transform: translateY(-2px);
}

/* -----------------------------
   MODAL STYLES
------------------------------ */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;

    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(4px);

    display: none;              /* default hidden */
    justify-content: center;    /* horizontal center */
    align-items: center;        /* vertical center */

    z-index: 1000;
}



.modal-content {
    background: #fff;
    width: 100%;
    max-width: 800px;
    margin: 0;                  /* IMPORTANT: walang margin */

    padding: 35px 30px;
    border-radius: 16px;

    max-height: 90vh;
    overflow-y: auto;

    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    animation: popup 0.35s ease;
}



@keyframes popup {
    from { transform: scale(0.85); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.modal-content h3 {
    text-align: center;
    margin-bottom: 20px;
    font-size: 22px;
}

/* -----------------------------
   FORM GRID
------------------------------ */
.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 20px;
}

.form-group {
    display: flex;
    flex-direction: column;
}

.form-group label {
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 5px;
}

.form-group input,
.form-group select {
    padding: 10px;
    border: 1px solid #aaa;
    border-radius: 8px;
    font-size: 14px;
    background: #f7faf8;
    transition: 0.2s;
}

.form-group input:focus,
.form-group select:focus {
    border-color: #1c7c32;
    box-shadow: 0 0 6px rgba(28,124,50,0.3);
}

/* -----------------------------
   MODAL BUTTONS
------------------------------ */
/* -----------------------------
   MODAL STYLES (IMPROVED)
------------------------------ */
.modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6); /* slightly darker overlay */
    backdrop-filter: blur(4px);
    justify-content: center;
    align-items: center;
    z-index: 999;
    padding: 15px; /* mobile-friendly spacing */
}

.modal-content {
    background: #ffffff;
    width: 100%;
    max-width: 800px; /* slightly smaller for elegance */
    padding: 35px 30px;
    border-radius: 16px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    animation: popup 0.35s ease;
}

.modal-content h3 {
    text-align: center;
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 25px;
    color: #1c7c32;
}

/* -----------------------------
   FORM GRID (MODERN)
------------------------------ */
.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 18px 25px; /* horizontal and vertical spacing */
}

.form-group label {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 6px;
    color: #333;
}

.form-group input,
.form-group select {
    padding: 12px 14px;
    border: 1px solid #ccc;
    border-radius: 10px;
    font-size: 14px;
    background: #f9fafb;
    transition: all 0.2s ease-in-out;
}

.form-group input:focus,
.form-group select:focus {
    border-color: #1c7c32;
    box-shadow: 0 0 8px rgba(28,124,50,0.25);
    outline: none;
}

/* -----------------------------
   MODAL BUTTONS (CLEAN)
------------------------------ */
.modal-buttons {
    margin-top: 30px;
    display: flex;
    justify-content: flex-end;
    gap: 15px;
}

#saveBtn, #closeBtn {
    padding: 12px 22px;
    font-size: 14px;
    font-weight: 600;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
}

#saveBtn {
    background: #1c7c32;
    color: white;
    box-shadow: 0 4px 12px rgba(28,124,50,0.3);
}

#saveBtn:hover {
    background: #145e25;
    transform: translateY(-2px);
}

#closeBtn {
    background: #e0e0e0;
    color: #333;
}

#closeBtn:hover {
    background: #cfcfcf;
    transform: translateY(-2px);
}

/* -----------------------------
   RESPONSIVE MODAL
------------------------------ */
@media (max-width: 600px) {
    .modal-content {
        padding: 25px 20px;
    }

    .form-grid {
        gap: 15px 15px;
    }

    #saveBtn, #closeBtn {
        width: 100%;
        text-align: center;
    }

    .modal-buttons {
        flex-direction: column;
        gap: 12px;
    }
}


/* -----------------------------
   ACTION BUTTONS (TABLE)
------------------------------ */
.action-btn {
    padding: 6px 10px;
    border: none;
    border-radius: 8px;
    font-size: 12px;
    cursor: pointer;
    transition: 0.2s;
}

.edit-btn {
    background: #1e88e5;
    color: white;
}

.edit-btn:hover {
    background: #156ec2;
}

.delete-btn {
    background: #e53935;
    color: white;
}

.delete-btn:hover {
    background: #c62828;
}

/* -----------------------------
   RESPONSIVE
------------------------------ */
@media (max-width: 768px) {
    .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }

    table {
        font-size: 12px;
    }
}

</style>
</head>
<body>

<div class="header">
    <img src="plsp pic.jpg" class="logo">
    <div class="title">
        <h2>Pamantasan ng Lungsod ng San Pablo</h2>
        <p>Prime to Lead and Serve for Progress!</p>
    </div>
</div>
<button class="backBtn" onclick="window.location.href='HR.php'">‚Üê Back</button>

<div class="container">

    <table id="employeeTable">
        <?php include "fetch_201.php"; ?>
        <thead>
            <tr>
                <th>#</th>
                <th>Name</th>
                <th>Date of Birth</th>
                <th>Place of Birth</th>
                <th>Sex</th>
                <th>Age</th>
                <th>Email Address</th>
                <th>Civil Status</th>
                <th>Address</th>
                <th>Date Hired</th>
                <th>Emergency Contact</th>
                <th>Emergency Contact No.</th>
                <th>ID</th>
                <th>Employee Status</th>
                <th>Position</th>
                <th>Department</th>
                <th>Employee Type</th>
                <th style="width:120px" class="header-controls">
                    <button onclick="enableEditAll()" id="editAllBtn">‚úé Edit</button>
                    <button onclick="toggleDeleteMode()" id="deleteModeBtn">üóë</button>
                </th>
            </tr>
        </thead>

        <tbody>
        </tbody>
    </table>

    <button id="addRowBtn">Add More ‚≠¢</button>
</div>

<!-- üîπ Modal Form -->
<!-- üîπ Modal Form -->
<div class="modal" id="modalForm">
    <div class="modal-content">
        <h3 id="formTitle">Add Employee</h3>

        <form id="dataForm">

            <div class="form-grid">

                <!-- Row 1 -->
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" id="name" name="name" required>
                </div>

                <div class="form-group">
                    <label>Date of Birth</label>
                    <input type="date" id="dob" name="dob" required>
                </div>

                <!-- Row 2 -->
                <div class="form-group">
                    <label>Place of Birth</label>
                    <input type="text" id="pob" name="pob">
                </div>

                <div class="form-group">
                    <label>Sex</label>
                    <select id="sex" name="sex">
                        <option>M</option>
                        <option>F</option>
                    </select>
                </div>

                <!-- Row 3 -->
                <div class="form-group">
                    <label>Age</label>
                    <input type="number" id="age" name="age">
                </div>

                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" id="email" name="email">
                </div>

                <!-- Row 4 -->
                <div class="form-group">
                    <label>Civil Status</label>
                    <input type="text" id="civil" name="civil">
                </div>

                <div class="form-group">
                    <label>Address</label>
                    <input type="text" id="address" name="address">
                </div>

                <!-- Row 5 -->
                <div class="form-group">
                    <label>Date Hired</label>
                    <input type="date" id="hired" name="hired">
                </div>

                <div class="form-group">
                    <label>Emergency Contact</label>
                    <input type="text" id="emname" name="emname">
                </div>

                <!-- Row 6 -->
                <div class="form-group">
                    <label>Emergency No.</label>
                    <input type="text" id="emnum" name="emnum">
                </div>

                <div class="form-group">
                    <label>ID Number</label>
                    <input type="text" id="idnum" name="idnum">
                </div>

                <!-- Row 7 -->
                <div class="form-group">
                    <label>Employee Status</label>
                    <input type="text" id="estatus" name="estatus">
                </div>

                <div class="form-group">
                    <label>Position</label>
                    <input type="text" id="pos" name="pos">
                </div>

                <!-- Row 8 -->
                <div class="form-group">
                    <label>Department</label>
                    <input type="text" id="dept" name="dept">
                </div>

                <div class="form-group">
                    <label>Employee Type</label>
                    <input type="text" id="etype" name="etype">
                     
                </div>

            </div>

            <div class="modal-buttons">
                <button type="submit" id="saveBtn">Save</button>
                <button type="button" id="closeBtn">Cancel</button>
            </div>

        </form>
    </div>
</div>

<script >// CATEGORY SELECTION
const categorySelect = document.getElementById("categorySelect");
const subCategorySelect = document.getElementById("subCategorySelect");

// Options
const departmentOptions = ["CCSE", "CBAM", "CTED", "CAS", "COA", "CNAHS", "CTHM"];
const officeOptions = ["OSAS", "Sinag", "Registrar", "EMIS", "Finance", "Admin", "HR", "Librarian", "Clinic", "Payroll"];

// When first selector changes
categorySelect.addEventListener("change", function () {
    subCategorySelect.innerHTML = ""; // Clear previous options
    subCategorySelect.disabled = false;

    let list = [];

    if (this.value === "department") {
        list = departmentOptions;
    } else if (this.value === "office") {
        list = officeOptions;
    }

    // Add placeholder
    const placeholder = document.createElement("option");
    placeholder.textContent = "Select an option";
    placeholder.disabled = true;
    placeholder.selected = true;
    subCategorySelect.appendChild(placeholder);

    // Populate new options
    list.forEach(item => {
        const opt = document.createElement("option");
        opt.value = item;
        opt.textContent = item;
        subCategorySelect.appendChild(opt);
    });
});
</script>
<script>
const modal = document.getElementById("modalForm");
const addBtn = document.getElementById("addRowBtn");
const closeBtn = document.getElementById("closeBtn");
const form = document.getElementById("dataForm");

addBtn.onclick = () => {
    modal.style.display = "block";
};

closeBtn.onclick = () => {
    modal.style.display = "none";
};

// SAVE FORM TO DATABASE
form.addEventListener("submit", function(e) {
    e.preventDefault();

    const formData = new FormData(form);

    fetch("add_employee.php", {
        method: "POST",
        body: formData
    })
    .then(res => res.text())
    .then(data => {
        if (data === "success") {
            alert("Employee added successfully!");
            location.reload();  // refresh table
        } else {
            alert("Failed to save data.");
        }
    });
});

  function enableEditAll() {
    editMode = !editMode;
    document.querySelectorAll('tbody tr').forEach(row => {
      for(let i=1; i<row.cells.length-1; i++) {
        row.cells[i].contentEditable = editMode;
        row.cells[i].style.backgroundColor = editMode ? '#fffbe6' : '';
      }
    });
    document.getElementById('editAllBtn').textContent = editMode ? 'üíæ Done' : '‚úé Edit';
  }

  function toggleDeleteMode() {
    deleteMode = !deleteMode;
    document.querySelectorAll('tbody tr').forEach(row => {
      row.classList.toggle('selectable', deleteMode);
      row.classList.remove('selected-for-delete');
    });
    if(deleteMode) {
      // show confirm button
      if(!document.getElementById('confirmDeleteBtn')) {
        const btn = document.createElement('button');
        btn.id = 'confirmDeleteBtn';
        btn.textContent = 'Confirm Delete';
        btn.className = 'btn btn-save';
        btn.style.marginRight = '8px';
        btn.onclick = confirmDelete;
        document.querySelector('.action-buttons').prepend(btn);
      }
    } else {
      const b = document.getElementById('confirmDeleteBtn');
      if(b) b.remove();
    }
  }

  // Add click handler for row selection
  document.addEventListener('click', function(e) {
    const tr = e.target.closest('tbody tr');
    if(!tr) return;
    if(tr.classList.contains('selectable')) {
      tr.classList.toggle('selected-for-delete');
    }
  });

  function confirmDelete() {
    const selected = document.querySelectorAll('tbody tr.selected-for-delete');
    if(selected.length === 0) {
      alert('No rows selected');
      return;
    }
    if(!confirm(`Delete ${selected.length} selected row(s)?`)) return;
    selected.forEach(r => r.remove());
    updateStudentNumbers();
    toggleDeleteMode();
  }


</script>

</body>
</html>